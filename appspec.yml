version: 0.0
os: linux

hooks:
  ApplicationStop:
    - script: |
        #!/bin/bash
        set -euo pipefail

        echo "Stopping container..."
        # Get the container ID of the running container, ignoring the header line
        container_id=$(docker ps --format "{{.ID}}" | awk 'NR==1 {next} NR==2 {print $1}')
         docker rm -f $container_id
      timeout: 300
      runas: root
  AfterInstall:
    - location: scripts/start_container.sh
      timeout: 300
      runas: root
